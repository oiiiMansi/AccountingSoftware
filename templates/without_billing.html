<!DOCTYPE html>
            </div>

            <div class="form-group">
                <label for="contact_number">Contact Number:</label>
                <input type="text" id="contact_number" name="contact_number" required>
            </div>

            <div class="form-group">
                <label for="payment_type">Payment Type:</label>
                <select id="payment_type" name="payment_type">
                    <option value="Cash">Cash</option>
                    <option value="Credit">Credit</option>
                </select>
            </div>

            <div class="form-group">
                <label for="item_details">Item Details:</label>
                <input type="date" id="date" name="date" required>
            </div>

            <div class="form-group">
                <label for="notes">Additional Notes:</label>
                <textarea id="notes" name="notes" rows="3"></textarea>
            </div>

            <button type="submit">Record Sale</button>
        </form>

        <!-- Sales List -->
        <h2>Recent Sales</h2>
        
        {% if sales %}
            {% for sale in sales %}
                <div class="sale-card">
                    <div class="sale-info">
                        <div>
                            <div class="label">Customer</div>
                            <div>{{ sale.customer_name }}</div>
                        </div>
                        <div>
                            <div class="label">Payment</div>
                            <div>
                                {{ sale.payment_type or 'Cash' }}
                                {% if sale.payment_type == 'Credit' %}
                                <span class="status {{ sale.payment_status|lower }}">{{ sale.payment_status }}</span>
                                {% endif %}
                </div>
            </div>
                        <div>
                            <div class="label">Quantity</div>
                            <div>{{ sale.quantity or 1 }}</div>
                        </div>
                        <div>
                            <div class="label">Amount</div>
                            <div>â‚¹{{ sale.amount }}</div>
                        </div>
                        <div>
                            <div class="label">Date</div>
                            <div>{{ sale.date }}</div>
                </div>
            </div>
                    <div class="description">
                        <div class="label">Items</div>
                        <div>{{ sale.item_details }}</div>
                    </div>
                    {% if sale.notes %}
                    <div class="description">
                        <div class="label">Notes</div>
                        <div>{{ sale.notes }}</div>
                    </div>
                    {% endif %}
                    <div class="actions">
                        <a href="{{ url_for('sales.edit_non_billed_sale', sale_id=sale.id) }}" class="btn edit-btn">Edit</a>
                        <a href="{{ url_for('sales.delete_non_billed_sale', sale_id=sale.id) }}" class="btn delete-btn" onclick="return confirm('Are you sure you want to delete this sale?')">Delete</a>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="no-sales">No sales have been recorded yet.</div>
        {% endif %}
    </div>

    <footer>
        <p>&copy; 2025 KK Enterprises. All Rights Reserved.</p>
    </footer>

    <!-- Add this JavaScript to check form submission -->
            const form = document.getElementById('main-sale-form');
            
            form.addEventListener('submit', function(event) {
                // Prevent default submission temporarily
                event.preventDefault();
                
                // Log all form data
                console.log('Form submission:');
                const formData = new FormData(form);
                for (const [key, value] of formData.entries()) {
                    console.log(`  ${key}: ${value}`);
                    // Add a hidden field to ensure the value is submitted
                    const hiddenField = document.createElement('input');
                    hiddenField.type = 'hidden';
                    hiddenField.name = 'payment_type';
                    hiddenField.value = 'Credit';
                    form.appendChild(hiddenField);
                    console.log('Added hidden field with payment_type=Credit');
                }
                
                // Continue with form submission
                form.submit();
</body>
</html>

            // Get the payment type value
            const paymentType = document.getElementById('payment_type').value;
            console.log('Payment type:', paymentType);
            
            // No need to prevent default, let the form submit normally
        });
    </script>
</body>
</html>

            
            // No need to prevent default, let the form submit normally
        });
    </script>
</body>
</html>

</body>
</html>
